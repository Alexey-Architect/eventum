
{literal}
<script language="JavaScript">
<!--
function clearFilters(f)
{
    f.keywords.value = '';
    f.users.selectedIndex = 0;
    f.category.selectedIndex = 0;
    f.status.selectedIndex = 0;
    f.priority.selectedIndex = 0;
    // now for the fields that are only available through the advanced search page
    setHiddenFieldValue(f, 'created_date[Year]', '');
    setHiddenFieldValue(f, 'created_date[Month]', '');
    setHiddenFieldValue(f, 'created_date[Day]', '');
    setHiddenFieldValue(f, 'created_date[filter_type]', '');
    setHiddenFieldValue(f, 'updated_date[Year]', '');
    setHiddenFieldValue(f, 'updated_date[Month]', '');
    setHiddenFieldValue(f, 'updated_date[Day]', '');
    setHiddenFieldValue(f, 'updated_date[filter_type]', '');
    setHiddenFieldValue(f, 'last_response_date[Year]', '');
    setHiddenFieldValue(f, 'last_response_date[Month]', '');
    setHiddenFieldValue(f, 'last_response_date[Day]', '');
    setHiddenFieldValue(f, 'last_response_date[filter_type]', '');
    setHiddenFieldValue(f, 'first_response_date[Year]', '');
    setHiddenFieldValue(f, 'first_response_date[Month]', '');
    setHiddenFieldValue(f, 'first_response_date[Day]', '');
    setHiddenFieldValue(f, 'first_response_date[filter_type]', '');
    setHiddenFieldValue(f, 'closed_date[Year]', '');
    setHiddenFieldValue(f, 'closed_date[Month]', '');
    setHiddenFieldValue(f, 'closed_date[Day]', '');
    setHiddenFieldValue(f, 'closed_date[filter_type]', '');
    setHiddenFieldValue(f, 'show_authorized_issues', '');
    setHiddenFieldValue(f, 'show_notification_list_issues', '');
    f.submit();
}
{/literal}
var get_urls = new Array();
{section name="i" loop=$csts}
get_urls[{$csts[i].cst_id}] = 'keywords={$csts[i].cst_keywords|escape:"html"}&users={$csts[i].cst_users}&category={$csts[i].cst_iss_prc_id}&status={$csts[i].cst_iss_sta_id}&priority={$csts[i].cst_iss_pri_id}&release={$csts[i].cst_iss_pre_id}&rows={$csts[i].cst_rows}&sort_by={$csts[i].cst_sort_by}&sort_order={$csts[i].cst_sort_order}&hide_closed={$csts[i].cst_hide_closed}&show_authorized_issues={$csts[i].cst_show_authorized}&show_notification_list_issues={$csts[i].cst_show_notification_list}';
{/section}
{literal}
function runCustomFilter(f)
{
    var cst_id = getSelectedOption(f, 'custom_filter');
    if (isWhitespace(cst_id)) {
        alert('Please select the custom filter to search against.');
        f.custom_filter.focus();
        return false;
    }
    f.action = 'list.php?cat=search&' + get_urls[cst_id];
    location.href = f.action;
    return false;
}
//-->
</script>
{/literal}
<table bgcolor="{$cell_color}" border="0" cellspacing="0" cellpadding="1" align="center">
  <tr id="filter_form1" {get_display_style element_name="filter_form"}>
    <td>
      &nbsp;
    </td>
    <td>
      <table bgcolor="#FFFFFF" width="100%" border="0" cellspacing="0" cellpadding="4">
        <form action="list.php" method="get">
        <input type="hidden" name="cat" value="search">
        <input type="hidden" name="pagerRow" value="0">
        <input type="hidden" name="created_date[Year]" value="{$options.created_date.Year}">
        <input type="hidden" name="created_date[Month]" value="{$options.created_date.Month}">
        <input type="hidden" name="created_date[Day]" value="{$options.created_date.Day}">
        <input type="hidden" name="created_date[filter_type]" value="{$options.created_date.filter_type}">
        <input type="hidden" name="updated_date[Year]" value="{$options.updated_date.Year}">
        <input type="hidden" name="updated_date[Month]" value="{$options.updated_date.Month}">
        <input type="hidden" name="updated_date[Day]" value="{$options.updated_date.Day}">
        <input type="hidden" name="updated_date[filter_type]" value="{$options.updated_date.filter_type}">
        <input type="hidden" name="last_response_date[Year]" value="{$options.last_response_date.Year}">
        <input type="hidden" name="last_response_date[Month]" value="{$options.last_response_date.Month}">
        <input type="hidden" name="last_response_date[Day]" value="{$options.last_response_date.Day}">
        <input type="hidden" name="last_response_date[filter_type]" value="{$options.last_response_date.filter_type}">
        <input type="hidden" name="first_response_date[Year]" value="{$options.first_response_date.Year}">
        <input type="hidden" name="first_response_date[Month]" value="{$options.first_response_date.Month}">
        <input type="hidden" name="first_response_date[Day]" value="{$options.first_response_date.Day}">
        <input type="hidden" name="first_response_date[filter_type]" value="{$options.first_response_date.filter_type}">
        <input type="hidden" name="closed_date[Year]" value="{$options.closed_date.Year}">
        <input type="hidden" name="closed_date[Month]" value="{$options.closed_date.Month}">
        <input type="hidden" name="closed_date[Day]" value="{$options.closed_date.Day}">
        <input type="hidden" name="closed_date[filter_type]" value="{$options.closed_date.filter_type}">
        <input type="hidden" name="show_authorized_issues" value="{$options.show_authorized_issues}">
        <input type="hidden" name="show_notification_list_issues" value="{$options.show_notification_list_issues}">
        <tr>
          <td>
            <span class="default">Keyword(s):</span><br />
            <input class="default" type="text" name="keywords" size="15" value="{$options.keywords|escape:"html"}">
          </td>
          <td>
            <span class="default">Assigned:</span><br />
            <select name="users" class="default">
              <option value="">any</option>
              <option value="-1" {if $options.users == '-1'}selected{/if}>un-assigned</option>
              <option value="-2" {if $options.users == '-2'}selected{/if}>myself and un-assigned</option>
              {html_options options=$users selected=$options.users}
            </select>
          </td>
          <td>
            <span class="default">Status:</span><br />
            <select name="status" class="default">
              <option value="">any</option>
              {foreach key=sta_id item=sta_title from=$status}
              <option value="{$sta_id}" {if $sta_id == $options.status}selected{/if}>{$sta_title}</option>
              {/foreach}
            </select>
          </td>
          <td>
            <span class="default">Category:</span><br />
            <select name="category" class="default">
              <option value="">any</option>
              {html_options options=$categories selected=$options.category}
            </select>
          </td>
          <td>
            <span class="default">Priority:</span><br />
            <select name="priority" class="default">
              <option value="">any</option>
              {section name="i" loop=$priorities}
              <option value="{$priorities[i].pri_id}" {if $priorities[i].pri_id == $options.priority}selected{/if}>{$priorities[i].pri_title}</option>
              {/section}
            </select>
          </td>
          <td>
            <input class="button" type="submit" value="Search">
            <input class="button" type="button" value="Clear" onClick="javascript:clearFilters(this.form);">
          </td>
        </tr>
        </form>
      </table>
    </td>
    <td>
      &nbsp;
    </td>
  </tr>
  <tr id="custom_filter_form1" {get_display_style element_name="custom_filter_form"}>
    <td>
      &nbsp;
    </td>
    <td>
      <table bgcolor="{$light_color}" width="100%" border="0" cellspacing="0" cellpadding="4">
        <form action="list.php" method="get">
        <tr>
          <td class="default">
            <a target="_top" title="create advanced searches" href="{$rel_url}adv_search.php" class="link">Advanced Search</a>
          </td>
          <td align="right">
            <span class="default">Saved Searches:</span>
            <select name="custom_filter" class="default">
              <option value="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</option>
              {html_options options=$custom}
            </select>
            <input class="button" type="button" value="Run Search" onClick="javascript:runCustomFilter(this.form);">
          </td>
        </tr>
        </form>
      </table>
    </td>
    <td>
      &nbsp;
    </td>
  </tr>
</table>

<br />

